---
title: 'DevRev PLuG Config'
date: 2021-07-31T15:32:14Z
lastmod: '2021-02-01'
tags: ['PLuG']
draft: false
summary: 'Explaining DevRev PLuG Configuration'
layout: PostSimple
bibliography: references-data.bib
---

# PLuG Widget Configuration

Before getting started, you will need the following:
1. Basic understanding of your code base as you need to know where to place the widget code.
3. Access to your code base
4. Access to the Support Settings page in the [DevRev app](https://app.devrev.ai/)

### Definitions
**RevU**

In the DevRev ecosystem RevU refers to your end user. RevU is short for RevUser.

**RevO**

This is short for RevOrganization which is the organization a RevU is part of.

**DevO**

This is short for DevOrganization which is your company.

**AppToken**

The AppToken uniquely identifies your organization.

**RevToken**

A RevToken is a session token which identifies the RevU when they interact with the widget.
This allows them to see previous conversations and tickets in the PLuG widget and allows you to identify them in the PLuG Inbox

### URL
Your widgetâ€™s URL will follow the format of **`https://plug.devrev.ai/{YourOrgName}/widget.js`**

### Vanilla JavaScript
To initialize the PLuG widget, copy and paste the following code snippet into your application. 
You can place it before the closing body tag.
Ideally, this will be in a common file which is already included in all pages (ex. index.js)
```javascript
const sessionToken = '<SESSION_TOKEN>'
<script src="https://plug.devrev.ai/{YourOrgName}/widget.js"></script>
<script>
  window.addEventListener('load', function () {
    const widget = new window.DevRevSupportSdk({
        'sessionToken': sessionToken
     });
  });
</script>
```
Refer to the sections below for obtaining a sessionToken for a RevUser


### Obtain a sessionToken
**Step 1:**
Retrieve your AppToken from the Support Settings page within the DevRev App

**Step 2:**
The example below shows how you could use DevRev's Token api to get a session token for a RevUser by using your DevOrg's AppToken.
For optimal security, ***this call must be made from the server side so that the DevOrg's AppToken is not exposed.***
This sample code is JavaScript but you can use your preferred language to make this API call.

***You must include one of the following attributes `email` or `external_uid` for creating the user.***
```typescript
export interface User {
  display_name?: string; // [Optional] Display Name of the user.
  full_name?: string; // [Optional] Full Name of the user.
  email?: string; // Email address of the user. This will be used as unique identifier if `external_uid` is not present.
  external_uid?: string; // The unique ID of the user in your system. If present, this will be preferred over the `email` as unique identifier for the user.
  external_uid_issuer?: string; // [Optional] Unique ID issuer if any.
  external_oid?: string; // [Optional] Unique ID of the external Org the user belongs to.
  external_oid_issuer?: string; // [Optional] External Org ID issuer.
}

export async function getSessionTokenForRevUser(user: User) {
  // Token endpoint to call for obtaining session token.
  const url = 'https://api.devrev.ai/token';
  // Your Org's Application token which is required for provisioning a RevUser.
  const appToken = '<YOUR_APP_TOKEN>';

  const headers = {
    Authorization: appToken,
  };
  const response = await axios.post(
    url,
    {
      grant_type: 'urn:ietf:params:oauth:grant-type:token-exchange',
      subject_token: JSON.stringify(user),
      subject_token_type: 'urn:devrev:params:oauth:token-type:userinfo',
      requested_token_type: 'urn:devrev:params:oauth:token-type:session',
    },
    { headers },
  );
  const sessionToken = response.data['access_token'];
  return sessionToken;
}
```